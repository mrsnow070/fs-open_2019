{"version":3,"sources":["services/phonebookService.js","components/PersonForm/PersonForm.js","components/Filter/Filter.js","components/Persons/Persons.js","components/Notification/Notification.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","then","resp","data","updatePersons","updateNotification","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","e","name","preventDefault","filter","person","id","length","post","postAddEntry","number","type","message","catch","error","response","window","confirm","put","err","console","log","value","onChange","target","updateFilter","persons","deleteHandler","updatedPersons","p","delete","deleteEntry","findMatches","wordToMatch","string","regex","RegExp","match","map","key","onClick","personsToShow","Notification","setter","className","useEffect","setTimeout","push","join","App","setPersons","notificationMessage","setNotificationMessage","setFilter","Filter","PersonForm","Persons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bf5b0ec3.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nexport const getAll = () => {\r\n    return axios.get(baseUrl)\r\n        .then(resp => resp.data)\r\n}\r\n\r\nexport const postAddEntry = (data) => {\r\n    return axios.post(baseUrl, data)\r\n        .then(resp => resp)\r\n}\r\n\r\nexport const deleteEntry = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`);\r\n}\r\n\r\nexport const putUpdateNumber = (id, person) => {\r\n    return axios.put(`${baseUrl}/${id}`, person)\r\n}\r\n\r\nexport const getByName = name => {\r\n    return axios.get(baseUrl)\r\n        .then(resp => resp.data.filter((person) => {\r\n\r\n            return person.name === name\r\n        }))\r\n}\r\n\r\n\r\n\r\n\r\n","import React, { useState } from 'react';\r\nimport { postAddEntry, putUpdateNumber, getByName, getAll } from '../../services/phonebookService';\r\n\r\nexport default ({ updatePersons, updateNotification }) => {\r\n\r\n    const [newName, setNewName] = useState('');\r\n    const [newNumber, setNewNumber] = useState('');\r\n\r\n    const inputNameHandler = (e) => {\r\n        setNewName(e.target.value)\r\n    }\r\n    const inputNumberHandler = (e) => setNewNumber(e.target.value);\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        getByName(newName).then(data => {\r\n            if (data.length === 0) {\r\n                postAddEntry({ name: newName, number: newNumber })\r\n                    .then(resp => {\r\n                        updateNotification({\r\n                            type: 'notification',\r\n                            message: `Added ${newName}`\r\n                        })\r\n                        getAll()\r\n                            .then(resp => updatePersons(resp));\r\n                        return [setNewName(''), setNewNumber('')];\r\n                    })\r\n                    .catch(error => {\r\n                        updateNotification({\r\n                            type: 'error',\r\n                            message: error.response.data.error\r\n                        })\r\n\r\n                    })\r\n                    ;\r\n            } else {\r\n                if (window.confirm(`${newName} is already added to phonebook. Replace old number with a new one?`)) {\r\n                    putUpdateNumber(data[0].id, {\r\n                        ...data[0],\r\n                        number: newNumber\r\n                    })\r\n                        .then(resp => {\r\n\r\n                            updateNotification({\r\n                                type: 'notification',\r\n                                message: `Number ${newName} is changed`\r\n                            });\r\n                            getAll()\r\n                                .then(resp => updatePersons(resp));\r\n                            return [setNewName(''), setNewNumber('')];\r\n                        })\r\n                        .catch(err => {\r\n                            console.log(err.response)\r\n                            updateNotification({\r\n                                type: 'error',\r\n                                message: err.response.data.error\r\n                            })\r\n                        })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <form onSubmit={submitHandler}>\r\n            <div>\r\n                name: <input\r\n                    value={newName}\r\n                    onChange={inputNameHandler}\r\n                />\r\n            </div>\r\n            <div>\r\n                number: <input\r\n                    value={newNumber}\r\n                    onChange={inputNumberHandler}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n};","import React from 'react';\r\n\r\nexport default ({ filter, updateFilter }) => {\r\n    const inputFilterHandler = e => {\r\n        updateFilter(e.target.value);\r\n    }\r\n    return (\r\n        <div>\r\n            filter shown with: <input\r\n                value={filter}\r\n                onChange={inputFilterHandler}\r\n            />\r\n        </div>\r\n    )\r\n};","import React from 'react';\r\nimport { deleteEntry } from '../../services/phonebookService'\r\n\r\nexport default ({ filter, persons, updatePersons, updateNotification }) => {\r\n\r\n    const deleteHandler = (id, name) => {\r\n        const updatedPersons = persons.filter(p => p.id !== id);\r\n        if (window.confirm(`Do you really want delete ${name}`)) {\r\n\r\n            deleteEntry(id).then(resp => {\r\n                updatePersons([...updatedPersons])\r\n                updateNotification({ type: 'notification', message: `${name} successely deleted` })\r\n\r\n            }).catch(error => {\r\n                updateNotification({\r\n                    type: 'error',\r\n                    message: `Information of ${name} has already removed from server`\r\n                });\r\n                updatePersons(persons.filter(person => person.name !== name))\r\n            })\r\n        }\r\n    }\r\n\r\n    const personsToShow = (filter) => {\r\n\r\n        return findMatches(filter, persons).map(\r\n            person => <p\r\n                key={person.name}\r\n            >\r\n                {person.name} {person.number} <button onClick={() => deleteHandler(person.id, person.name)}>delete &times;\r\n                </button>\r\n            </p>\r\n        )\r\n\r\n    };\r\n\r\n    const findMatches = (wordToMatch, persons) => {\r\n        return persons.filter(string => {\r\n            const regex = new RegExp(wordToMatch, 'gi');\r\n            return string.name.match(regex);\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        personsToShow(filter)\r\n    )\r\n\r\n};","import React, { useEffect } from 'react';\r\n\r\nconst Notification = ({ message, type, setter }) => {\r\n\r\n    let className = ['announce']\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setter({ type: null, message: '' })\r\n        }, 10000)\r\n    }, [message, setter, className, type])\r\n\r\n    if (type === 'error') {\r\n        className.push('error')\r\n    }\r\n    if (type === 'notification') {\r\n        className.push('notification');\r\n    }\r\n    if (type === null) {\r\n        return null\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className={className.join(' ')}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm/PersonForm';\nimport Filter from './components/Filter/Filter';\nimport Persons from './components/Persons/Persons';\nimport { getAll } from \"./services/phonebookService\";\nimport Notification from './components/Notification/Notification';\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [notificationMessage, setNotificationMessage] = useState({\n    type: null,\n    message: ''\n  })\n\n  useEffect(() => {\n    getAll().then(resp => setPersons([...resp]))\n\n  }, [])\n\n  const [filter, setFilter] = useState('');\n\n  return (\n    <div>\n      {notificationMessage.type === null ? null\n        : <Notification\n          type={notificationMessage.type}\n          message={notificationMessage.message}\n          setter={setNotificationMessage}\n        />\n      }\n      <h2>Phonebook</h2>\n      <Filter\n        filter={filter}\n        updateFilter={setFilter}\n      />\n\n      <h2>Add a new</h2>\n      <PersonForm\n        updatePersons={setPersons}\n        updateNotification={setNotificationMessage}\n      />\n\n      <h2>Numbers</h2>\n      <Persons\n        filter={filter}\n        persons={persons}\n        updatePersons={setPersons}\n        updateNotification={setNotificationMessage}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n \n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}